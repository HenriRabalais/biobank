!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_FilterForm=__webpack_require__(1),_FilterForm2=_interopRequireDefault(_FilterForm),_specimenForm=__webpack_require__(3),_specimenForm2=_interopRequireDefault(_specimenForm),_containerForm=__webpack_require__(6),_containerForm2=_interopRequireDefault(_containerForm),_Tabs=__webpack_require__(8),_columnFormatterSpecimen=__webpack_require__(9),_columnFormatterSpecimen2=_interopRequireDefault(_columnFormatterSpecimen),_columnFormatterContainer=__webpack_require__(10),_columnFormatterContainer2=_interopRequireDefault(_columnFormatterContainer),BiobankIndex=function(_React$Component){function BiobankIndex(props){_classCallCheck(this,BiobankIndex);var _this=_possibleConstructorReturn(this,(BiobankIndex.__proto__||Object.getPrototypeOf(BiobankIndex)).call(this,props));return _this.state={isLoaded:!1,specimenFilter:{},containerFilter:{},isOpen:!1,containerForm:!1},_this.fetchSpecimenData=_this.fetchSpecimenData.bind(_this),_this.fetchFormData=_this.fetchFormData.bind(_this),_this.fetchContainerData=_this.fetchContainerData.bind(_this),_this.updateSpecimenFilter=_this.updateSpecimenFilter.bind(_this),_this.updateContainerFilter=_this.updateContainerFilter.bind(_this),_this.resetFilters=_this.resetFilters.bind(_this),_this.toggleModal=_this.toggleModal.bind(_this),_this.toggleContainerModal=_this.toggleContainerModal.bind(_this),_this.mapFormOptions=_this.mapFormOptions.bind(_this),_this}return _inherits(BiobankIndex,_React$Component),_createClass(BiobankIndex,[{key:"componentDidMount",value:function(){this.fetchSpecimenData(),this.fetchFormData(),this.fetchContainerData()}},{key:"fetchSpecimenData",value:function(){$.ajax(this.props.specimenDataURL,{method:"GET",dataType:"json",success:function(data){this.setState({SpecimenData:data,isLoaded:!0})}.bind(this),error:function(_error){console.error(_error)}})}},{key:"fetchContainerData",value:function(){$.ajax(this.props.containerDataURL,{method:"GET",dataType:"json",success:function(data){this.setState({ContainerData:data,isLoaded:!0})}.bind(this),error:function(_error2){console.error(_error2)}})}},{key:"fetchFormData",value:function(){$.ajax(this.props.formDataURL,{method:"GET",dataType:"json",success:function(data){this.setState({FormData:data,isLoaded:!0})}.bind(this),error:function(_error3){console.error(_error3)}})}},{key:"updateSpecimenFilter",value:function(specimenFilter){this.setState({specimenFilter:specimenFilter})}},{key:"updateContainerFilter",value:function(containerFilter){this.setState({containerFilter:containerFilter})}},{key:"resetFilters",value:function(){this.refs.biobankFilter.clearFilter()}},{key:"toggleModal",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"toggleContainerModal",value:function(){this.setState({containerForm:!this.state.containerForm})}},{key:"mapFormOptions",value:function(rawObject,targetAttribute){var data={};for(var id in rawObject)data[id]=rawObject[id][targetAttribute];return data}},{key:"render",value:function(){if(!this.state.isLoaded)return React.createElement("button",{className:"btn-info has-spinner"},"Loading",React.createElement("span",{className:"glyphicon glyphicon-refresh glyphicon-refresh-animate"}));var addSpecimenButton=void 0,specimenForm=void 0,addContainerButton=void 0,containerForm=void 0;if(loris.userHasPermission("biobank_write")){addSpecimenButton=React.createElement("button",{type:"button",className:"btn-xs btn-success",onClick:this.toggleModal,style:{marginLeft:"10px",border:"none"}},React.createElement("span",{className:"glyphicon glyphicon-plus",style:{marginRight:"5px"}}),"Add");var specimenTypes=this.mapFormOptions(this.state.FormData.specimenTypes,"type"),containerTypesPrimary=this.mapFormOptions(this.state.FormData.containerTypesPrimary,"label"),containerBarcodesNonPrimary=this.mapFormOptions(this.state.FormData.containersNonPrimary,"barcode");specimenForm=React.createElement(_Tabs.Modal,{show:this.state.isOpen,onClose:this.toggleModal},React.createElement(_specimenForm2.default,{specimenTypes:specimenTypes,containerTypesPrimary:containerTypesPrimary,containerBarcodesNonPrimary:containerBarcodesNonPrimary,specimenTypeAttributes:this.state.FormData.specimenTypeAttributes,attributeDatatypes:this.state.FormData.attributeDatatypes,capacities:this.state.FormData.capacities,specimenTypeUnits:this.state.FormData.specimenTypeUnits,pSCIDs:this.state.FormData.pSCIDs,visits:this.state.FormData.visits,sessionData:this.state.FormData.sessionData,action:loris.BaseURL+"/biobank/ajax/SpecimenInfo.php?action=submitSpecimen",closeModal:this.toggleModal,refreshTable:this.fetchSpecimenData})),addContainerButton=React.createElement("button",{type:"button",className:"btn btn-success",onClick:this.toggleContainerModal,style:{marginLeft:"10px",border:"none"}},React.createElement("span",{className:"glyphicon glyphicon-plus",style:{marginRight:"5px"}}),"Add");var containerTypesNonPrimary=this.mapFormOptions(this.state.FormData.containerTypesNonPrimary,"label");containerForm=React.createElement(_Tabs.Modal,{show:this.state.containerForm,onClose:this.toggleContainerModal},React.createElement(_containerForm2.default,{containerTypesNonPrimary:containerTypesNonPrimary,sites:this.state.FormData.sites,action:loris.BaseURL+"/biobank/ajax/SpecimenInfo.php?action=submitContainer",closeModal:this.toggleContainerModal,refreshTable:this.fetchContainerData}))}var tabList=[{id:"specimens",label:["Specimens",addSpecimenButton]},{id:"containers",label:"Containers"}];return React.createElement("div",null,React.createElement(_Tabs.Tabs,{tabs:tabList,defaultTab:"specimens",updateURL:!0},React.createElement(_Tabs.TabPane,{TabId:tabList[0].id},React.createElement(_FilterForm2.default,{Module:"biobank",name:"specimen_filter",id:"specimen_filter",ref:"specimenFilter",columns:3,formElements:this.state.SpecimenData.form,onUpdate:this.updateSpecimenFilter,filter:this.state.specimenFilter},React.createElement("br",null),React.createElement(ButtonElement,{label:"Clear Filters",type:"reset",onUserInput:this.resetFilters})),React.createElement(StaticDataTable,{Data:this.state.SpecimenData.Data,Headers:this.state.SpecimenData.Headers,Filter:this.state.specimenFilter,getFormattedCell:_columnFormatterSpecimen2.default})),React.createElement(_Tabs.TabPane,{TabId:tabList[1].id},React.createElement(_FilterForm2.default,{Module:"biobank",name:"container_filter",id:"container_filter",ref:"containerFilter",columns:3,formElements:this.state.ContainerData.form,onUpdate:this.updateContainerFilter,filter:this.state.containerFilter},React.createElement("br",null),React.createElement(ButtonElement,{label:"Clear Filters",type:"reset",onUserInput:this.resetFilters})),addContainerButton,React.createElement(StaticDataTable,{Data:this.state.ContainerData.Data,Headers:this.state.ContainerData.Headers,Filter:this.state.containerFilter,getFormattedCell:_columnFormatterContainer2.default}))),specimenForm,containerForm)}}]),BiobankIndex}(React.Component);$(function(){var biobankIndex=React.createElement("div",{className:"page-biobank"},React.createElement(BiobankIndex,{specimenDataURL:loris.BaseURL+"/biobank/?format=json",containerDataURL:loris.BaseURL+"/biobank/ajax/SpecimenInfo.php?action=getContainerFilterData",formDataURL:loris.BaseURL+"/biobank/ajax/SpecimenInfo.php?action=getFormData"}));ReactDOM.render(biobankIndex,document.getElementById("lorisworkspace"))})},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Panel=__webpack_require__(2),_Panel2=_interopRequireDefault(_Panel),FilterForm=function(_React$Component){function FilterForm(props){_classCallCheck(this,FilterForm);var _this=_possibleConstructorReturn(this,(FilterForm.__proto__||Object.getPrototypeOf(FilterForm)).call(this,props));return _this.clearFilter=_this.clearFilter.bind(_this),_this.getFormChildren=_this.getFormChildren.bind(_this),_this.setFilter=_this.setFilter.bind(_this),_this.onElementUpdate=_this.onElementUpdate.bind(_this),_this.queryString=QueryString.get(),_this}return _inherits(FilterForm,_React$Component),_createClass(FilterForm,[{key:"componentDidMount",value:function(){var filter={},queryString=this.queryString;Object.keys(queryString).forEach(function(key){var filterKey="candidateID"===key?"candID":key;filter[filterKey]={value:queryString[key],exactMatch:!1}}),this.props.onUpdate(filter)}},{key:"clearFilter",value:function(){this.queryString=QueryString.clear(this.props.Module),this.props.onUpdate({})}},{key:"getFormChildren",value:function(){var formChildren=[];return React.Children.forEach(this.props.children,function(child,key){if(React.isValidElement(child)&&"function"==typeof child.type&&child.props.onUserInput){var callbackFunc=child.props.onUserInput,callbackName=callbackFunc.name,elementName=child.type.displayName,queryFieldName="candID"===child.props.name?"candidateID":child.props.name,filterValue=this.queryString[queryFieldName];"onUserInput"===callbackName&&(callbackFunc="ButtonElement"===elementName&&"reset"===child.props.type?this.clearFilter:this.onElementUpdate.bind(null,elementName)),formChildren.push(React.cloneElement(child,{onUserInput:callbackFunc,value:filterValue?filterValue:"",key:key})),this.setFilter(elementName,child.props.name,filterValue)}else formChildren.push(React.cloneElement(child,{key:key}))}.bind(this)),formChildren}},{key:"setFilter",value:function(type,key,value){var filter={};return this.props.filter&&(filter=JSON.parse(JSON.stringify(this.props.filter))),key&&value?(filter[key]={},filter[key].value=value,filter[key].exactMatch="SelectElement"===type):filter&&key&&""===value&&delete filter[key],filter}},{key:"onElementUpdate",value:function(type,fieldName,fieldValue){if("string"==typeof fieldName&&"string"==typeof fieldValue){var queryFieldName="candID"===fieldName?"candidateID":fieldName;this.queryString=QueryString.set(this.queryString,queryFieldName,fieldValue);var filter=this.setFilter(type,fieldName,fieldValue);this.props.onUpdate(filter)}}},{key:"render",value:function(){var formChildren=this.getFormChildren(),formElements=this.props.formElements;return formElements&&Object.keys(formElements).forEach(function(fieldName){var queryFieldName="candID"===fieldName?"candidateID":fieldName;formElements[fieldName].onUserInput=this.onElementUpdate.bind(null,fieldName),formElements[fieldName].value=this.queryString[queryFieldName]}.bind(this)),React.createElement(_Panel2.default,{id:this.props.id,height:this.props.height,title:this.props.title},React.createElement(FormElement,this.props,formChildren))}}]),FilterForm}(React.Component);FilterForm.defaultProps={id:"selection-filter",height:"100%",title:"Selection Filter",onUpdate:function(){console.warn("onUpdate() callback is not set!")}},FilterForm.propTypes={Module:React.PropTypes.string.isRequired,filter:React.PropTypes.object.isRequired,id:React.PropTypes.string,height:React.PropTypes.string,title:React.PropTypes.string,onUpdate:React.PropTypes.func},exports.default=FilterForm},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Panel=function(_React$Component){function Panel(props){_classCallCheck(this,Panel);var _this=_possibleConstructorReturn(this,(Panel.__proto__||Object.getPrototypeOf(Panel)).call(this,props));return _this.state={collapsed:_this.props.initCollapsed},_this.panelClass=_this.props.initCollapsed?"panel-collapse collapse":"panel-collapse collapse in",_this.toggleCollapsed=_this.toggleCollapsed.bind(_this),_this}return _inherits(Panel,_React$Component),_createClass(Panel,[{key:"toggleCollapsed",value:function(){this.setState({collapsed:!this.state.collapsed})}},{key:"render",value:function(){var glyphClass=this.state.collapsed?"glyphicon pull-right glyphicon-chevron-down":"glyphicon pull-right glyphicon-chevron-up",pencilGlyph=void 0;this.props.edit&&(pencilGlyph=React.createElement("span",{className:"glyphicon pull-right glyphicon-pencil",style:{marginRight:"10px",cursor:"pointer"},onClick:this.props.edit}));var plusGlyph=void 0;this.props.add&&(plusGlyph=React.createElement("span",{className:"glyphicon pull-right glyphicon-plus",style:{marginRight:"10px",cursor:"pointer"},onClick:this.props.add}));var removeGlyph=void 0;this.props.cancel&&(removeGlyph=React.createElement("span",{className:"glyphicon pull-right glyphicon-remove",style:{marginRight:"10px",cursor:"pointer"},onClick:this.props.cancel}));var panelHeading=this.props.title?React.createElement("div",{className:"panel-heading"},React.createElement("span",{className:glyphClass,onClick:this.toggleCollapsed,"data-toggle":"collapse","data-target":"#"+this.props.id,style:{cursor:"pointer"}}),pencilGlyph,plusGlyph,removeGlyph,this.props.title):"";return React.createElement("div",{className:"panel panel-primary"},panelHeading,React.createElement("div",{id:this.props.id,className:this.panelClass,role:"tabpanel"},React.createElement("div",{className:"panel-body",style:{height:this.props.height}},this.props.children)))}}]),Panel}(React.Component);Panel.propTypes={id:React.PropTypes.string,height:React.PropTypes.string,title:React.PropTypes.string,edit:React.PropTypes.func,add:React.PropTypes.func},Panel.defaultProps={initCollapsed:!1,id:"default-panel",height:"100%"},exports.default=Panel},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_barcodeForm=__webpack_require__(4),_barcodeForm2=_interopRequireDefault(_barcodeForm),BiobankSpecimenForm=function(_React$Component){function BiobankSpecimenForm(props){_classCallCheck(this,BiobankSpecimenForm);var _this=_possibleConstructorReturn(this,(BiobankSpecimenForm.__proto__||Object.getPrototypeOf(BiobankSpecimenForm)).call(this,props));return _this.state={formData:{},barcodeFormList:{},errorMessage:null,formErrors:{},countBarcodeForms:[1]},_this.handleSubmit=_this.handleSubmit.bind(_this),_this.validateForm=_this.validateForm.bind(_this),_this.setFormData=_this.setFormData.bind(_this),_this.specimenSubmit=_this.specimenSubmit.bind(_this),_this.addBarcodeForm=_this.addBarcodeForm.bind(_this),_this.setBarcodeFormData=_this.setBarcodeFormData.bind(_this),_this}return _inherits(BiobankSpecimenForm,_React$Component),_createClass(BiobankSpecimenForm,[{key:"componentDidMount",value:function(){if(this.props.child){var formData=this.state.formData;formData.parentSpecimen=this.props.specimenId,formData.pscid=this.props.candidateId,formData.visitLabel=this.props.sessionId,formData.unitId=this.props.unitId,this.setState({formData:formData})}}},{key:"render",value:function(){for(var _this2=this,glyphStyle={color:"#D3D3D3",margin:"auto"},buttonStyle={appearance:"none",outline:"none",boxShadow:"none",borderColor:"transparent",backgroundColor:"transparent"},barcodeForms=[],_loop=function(i){barcodeForms.push(React.createElement(_barcodeForm2.default,{setParentFormData:_this2.setBarcodeFormData,id:_this2.state.countBarcodeForms[i],specimenTypes:_this2.props.specimenTypes,containerTypesPrimary:_this2.props.containerTypesPrimary,containerBarcodesNonPrimary:_this2.props.containerBarcodesNonPrimary,specimenTypeAttributes:_this2.props.specimenTypeAttributes,attributeDatatypes:_this2.props.attributeDatatypes,capacities:_this2.props.capacities,specimenTypeUnits:_this2.props.specimenTypeUnits,units:_this2.props.units,button:i+1===_this2.state.countBarcodeForms.length?React.createElement("button",{type:"button",className:"btn btn-success btn-sm",onClick:_this2.addBarcodeForm},React.createElement("span",{className:"glyphicon glyphicon-plus"})):React.createElement("button",{type:"button",className:"btn btn-primary-outline btn-sm",style:buttonStyle,onClick:function(){return _this2.removeBarcodeForm(i)}},React.createElement("span",{className:"glyphicon glyphicon-remove",style:glyphStyle}))}))},i=0;i<this.state.countBarcodeForms.length;i++)_loop(i);var staticFields=void 0,remainingQuantityFields=void 0,selectFields=void 0;return this.props.child?(staticFields=React.createElement("div",null,React.createElement(StaticElement,{label:"Parent Specimen",text:this.props.barcode}),React.createElement(StaticElement,{label:"PSCID",text:this.props.pscid}),React.createElement(StaticElement,{label:"Visit Label",text:this.props.visit})),remainingQuantityFields=React.createElement("div",null,React.createElement(TextboxElement,{name:"quantity",label:"Remaining Quantity",onUserInput:this.setFormData,required:!0,value:this.state.formData.quantity}),React.createElement(SelectElement,{name:"unitId",label:"Unit",options:this.props.specimenUnits,onUserInput:this.setFormData,emptyOption:!1,required:!0,value:this.state.formData.unitId}))):selectFields=React.createElement("div",null,React.createElement(SelectElement,{name:"pscid",label:"PSCID",options:this.props.pSCIDs,onUserInput:this.setFormData,ref:"pscid",required:!0,value:this.state.formData.pscid}),React.createElement(SelectElement,{name:"visitLabel",label:"Visit Label",options:this.state.visits,onUserInput:this.setFormData,ref:"visitLabel",required:!0,value:this.state.formData.visitLabel,disabled:!this.state.formData.pscid})),React.createElement(FormElement,{name:"specimenForm",onSubmit:this.handleSubmit,ref:"form"},React.createElement("h3",null,React.createElement("b",null,"Add New ",this.props.child?"Aliquots":"Specimens")),React.createElement("br",null),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-11"},staticFields,selectFields)),barcodeForms,React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-11"},remainingQuantityFields)),React.createElement("div",{className:"col-xs-3 col-xs-offset-9"},React.createElement(ButtonElement,{label:"Submit"})),React.createElement("a",{onClick:this.toggleModal},"Cancel"))}},{key:"validateForm",value:function(formElement,value){var _this3=this,formErrors=this.state.formErrors;"barcode"===formElement&&""!==value&&(/^hello/.test(this.state.formData.barcode)?formErrors.barcode=!1:formErrors.barcode=!0),"quantity"===formElement&&""!==value&&(isNaN(value)||value>this.props.capacities[this.state.currentContainerType]?formErrors.quantity=!0:formErrors.quantity=!1);var specimenTypeFieldsObject=this.props.specimenTypeAttributes[this.state.currentSpecimenType];Object.keys(specimenTypeFieldsObject).map(function(attribute){var datatype=_this3.props.attributeDatatypes[specimenTypeFieldsObject[attribute].datatypeId].datatype;"number"===datatype&&formElement===attribute&&(isNaN(value)&&""!==value?formErrors[attribute]=!0:formErrors[attribute]=!1)});this.setState({formErrors:formErrors})}},{key:"handleSubmit",value:function(e){e.preventDefault();var formData=this.state.formData,formRefs=(this.state.barcodeFormList,this.refs);this.isValidForm(formRefs,formData)&&this.specimenSubmit()}},{key:"specimenSubmit",value:function(){var formData=this.state.formData,barcodeFormList=this.state.barcodeFormList;formData.barcodeFormList=JSON.stringify(barcodeFormList);var formObj=new FormData;for(var key in formData)""!==formData[key]&&formObj.append(key,formData[key]);$.ajax({type:"POST",url:this.props.action,data:formObj,cache:!1,contentType:!1,processData:!1,xhr:function(){var xhr=new window.XMLHttpRequest;return xhr}.bind(this),success:function(){var event=new CustomEvent("update-datatable");window.dispatchEvent(event),this.props.child||this.props.refreshTable(),swal("Specimen Submission Successful!","","success"),this.props.closeModal()}.bind(this),error:function(err){console.error(err);var msg=err.responseJSON?err.responseJSON.message:"Specimen error!";this.setState({errorMessage:msg}),swal(msg,"","error")}.bind(this)})}},{key:"isValidForm",value:function isValidForm(formRefs,formData){var isValidForm=!0,requiredFields={pscid:null,visitLabel:null};return Object.keys(requiredFields).map(function(field){formData[field]?requiredFields[field]=formData[field]:formRefs[field]&&(formRefs[field].props.hasError=!0,isValidForm=!1)}),this.forceUpdate(),isValidForm}},{key:"setFormData",value:function(formElement,value){"pscid"===formElement&&""!==value&&(this.state.visits=this.props.sessionData[this.props.pSCIDs[value]].visits);var formData=this.state.formData;formData[formElement]=value,this.setState({formData:formData})}},{key:"setBarcodeFormData",value:function(barcodeFormData,barcodeId){var formData=this.state.formData,barcodeFormList=this.state.barcodeFormList;barcodeFormList[barcodeId]=barcodeFormData,formData.barcodeFormList=barcodeFormList,this.setState({formData:formData})}},{key:"addBarcodeForm",value:function(){var countBarcodeForms=this.state.countBarcodeForms;countBarcodeForms.push(countBarcodeForms[countBarcodeForms.length-1]+1),this.setState({countBarcodeForms:countBarcodeForms})}},{key:"removeBarcodeForm",value:function(index){var countBarcodeForms=this.state.countBarcodeForms;countBarcodeForms.splice(index,1),this.setState({countBarcodeForms:countBarcodeForms})}}]),BiobankSpecimenForm}(React.Component);BiobankSpecimenForm.propTypes={DataURL:React.PropTypes.string.isRequired,action:React.PropTypes.string.isRequired,barcode:React.PropTypes.string,refreshTable:React.PropTypes.func},exports.default=BiobankSpecimenForm},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_collectionForm=__webpack_require__(5),_collectionForm2=_interopRequireDefault(_collectionForm),BiobankBarcodeForm=function(_React$Component){function BiobankBarcodeForm(props){_classCallCheck(this,BiobankBarcodeForm);var _this=_possibleConstructorReturn(this,(BiobankBarcodeForm.__proto__||Object.getPrototypeOf(BiobankBarcodeForm)).call(this,props));return _this.state={formData:{},formErrors:{}},_this.setFormData=_this.setFormData.bind(_this),_this.setSpecimenFormData=_this.setSpecimenFormData.bind(_this),_this.setParentFormData=_this.setParentFormData.bind(_this),_this}return _inherits(BiobankBarcodeForm,_React$Component),_createClass(BiobankBarcodeForm,[{key:"render",value:function(){return React.createElement(FormElement,{name:"biobankBarcode"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-11"},React.createElement("div",{"data-toggle":"collapse","data-target":"#"+this.props.id},React.createElement(TextboxElement,{name:"barcode",label:"Barcode "+this.props.id,onUserInput:this.setFormData,ref:"barcode",required:!0,value:this.state.formData.barcode,hasError:this.state.formErrors.barcode,errorMessage:"Incorrect Barcode format for this Specimen and Container Type"}))),React.createElement("div",{className:"col-xs-1"},this.props.button)),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-2"}),React.createElement("div",{className:"col-xs-9"},React.createElement("div",{id:this.props.id,className:"collapse"},React.createElement(_collectionForm2.default,{setParentFormData:this.setSpecimenFormData,specimenTypes:this.props.specimenTypes,specimenTypeAttributes:this.props.specimenTypeAttributes,attributeDatatypes:this.props.attributeDatatypes,containerTypesPrimary:this.props.containerTypesPrimary,containerBarcodesNonPrimary:this.props.containerBarcodesNonPrimary,specimenTypeUnits:this.props.specimenTypeUnits,stati:this.props.stati})))))}},{key:"setFormData",value:function(formElement,value){var formData=this.state.formData;formData[formElement]=value,this.setState({formData:formData},this.setParentFormData)}},{key:"setSpecimenFormData",value:function(specimenFormData){var formData=this.state.formData;for(var attribute in specimenFormData)formData[attribute]=specimenFormData[attribute];this.setState({formData:formData},this.setParentFormData)}},{key:"setParentFormData",value:function(){this.props.setParentFormData(this.state.formData,this.props.id)}}]),BiobankBarcodeForm}(React.Component);BiobankBarcodeForm.propTypes={id:React.PropTypes.string,specimenTypes:React.PropTypes.object.isRequired,containerTypesPrimary:React.PropTypes.object.isRequired,specimenTypeAttributes:React.PropTypes.object.isRequired,attributeDatatypes:React.PropTypes.object.isRequired,capacities:React.PropTypes.object.isRequired},exports.default=BiobankBarcodeForm},function(module,exports){"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);
subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),SpecimenCollectionForm=function(_React$Component){function SpecimenCollectionForm(props){_classCallCheck(this,SpecimenCollectionForm);var _this=_possibleConstructorReturn(this,(SpecimenCollectionForm.__proto__||Object.getPrototypeOf(SpecimenCollectionForm)).call(this,props));return _this.state={formData:{data:{}},currentSpecimenType:_this.props.edit?_this.props.specimenType:null,currentContainerType:_this.props.edit?_this.props.containerType:null,formErrors:{}},_this.setFormData=_this.setFormData.bind(_this),_this.setSpecimenTypeFieldFormData=_this.setSpecimenTypeFieldFormData.bind(_this),_this.setParentFormData=_this.setParentFormData.bind(_this),_this.getSpecimenTypeFields=_this.getSpecimenTypeFields.bind(_this),_this.handleUpdate=_this.handleUpdate.bind(_this),_this.updateSpecimen=_this.updateSpecimen.bind(_this),_this}return _inherits(SpecimenCollectionForm,_React$Component),_createClass(SpecimenCollectionForm,[{key:"componentDidMount",value:function(){var _this2=this,formData=this.state.formData;if(this.props.edit){formData.specimenId=this.props.specimenId,formData.containerId=this.props.containerId,formData.specimenType=this.props.specimenType,formData.containerType=this.props.containerType,formData.quantity=this.props.collection.quantity,formData.unitId=this.props.collection.unitId,formData.date=this.props.collection.date,formData.time=this.props.collection.time,formData.comments=this.props.collection.comments;var specimenTypeFieldsObject=this.props.specimenTypeAttributes[this.state.currentSpecimenType];if(specimenTypeFieldsObject){Object.keys(specimenTypeFieldsObject).map(function(attribute){formData.data[attribute]=_this2.props.collection.data[attribute]})}}this.setState({formData:formData})}},{key:"render",value:function(){var parentContainerField;this.props.edit||(parentContainerField=React.createElement(SelectElement,{name:"parentContainer",label:"Parent Container Barcode",options:this.props.containerBarcodesNonPrimary,onUserInput:this.setFormData,ref:"parentContainer",required:!1,value:this.state.formData.parentContainer}));var updateButton;this.props.edit&&(updateButton=React.createElement(ButtonElement,{label:"Update"}));var specimenTypeUnits={};if(this.state.currentSpecimenType){for(var id in this.props.specimenTypeUnits[this.state.currentSpecimenType])specimenTypeUnits[id]=this.props.specimenTypeUnits[this.state.currentSpecimenType][id].unit;var specimenTypeFieldsObject=this.props.specimenTypeAttributes[this.state.currentSpecimenType];if(specimenTypeFieldsObject)var specimenTypeFields=this.getSpecimenTypeFields(specimenTypeFieldsObject)}var specimenFields;return this.state.currentSpecimenType&&(specimenFields=React.createElement("div",null,React.createElement(SelectElement,{name:"containerType",label:"Container Type",options:this.props.containerTypesPrimary,onUserInput:this.setFormData,ref:"containerType",required:!0,value:this.state.formData.containerType}),parentContainerField,React.createElement(TextboxElement,{name:"quantity",label:"Quantity",onUserInput:this.setFormData,ref:"quantity",required:!0,value:this.state.formData.quantity,hasError:this.state.formErrors.quantity}),React.createElement(SelectElement,{name:"unitId",label:"Unit",options:specimenTypeUnits,onUserInput:this.setFormData,required:!0,value:this.state.formData.unitId}),specimenTypeFields,React.createElement(DateElement,{name:"date",label:"Date",minYear:"2000",maxYear:"2018",onUserInput:this.setFormData,required:!0,value:this.state.formData.date}),React.createElement(TimeElement,{name:"time",label:"Time",onUserInput:this.setFormData,required:!0,value:this.state.formData.time}),React.createElement(TextareaElement,{name:"comments",label:"Comments",onUserInput:this.setFormData,ref:"comments",value:this.state.formData.comments}),updateButton)),React.createElement(FormElement,{name:"biobankSpecimen",onSubmit:this.handleUpdate,ref:"form"},React.createElement("div",null,React.createElement(SelectElement,{name:"specimenType",label:"Specimen Type",options:this.props.specimenTypes,onUserInput:this.setFormData,ref:"specimenType",required:!0,value:this.state.formData.specimenType}),specimenFields))}},{key:"setFormData",value:function(formElement,value){var formData=this.state.formData;formData[formElement]=value,"specimenType"===formElement&&""!==value&&(this.props.edit&&swal({title:"Warning",text:"Changing the specimen type will result in the loss of any preparation or anaylsis data for this specimen. You will also need to manually change the specimen type of any aliquots derived from this specimen. Proceed with caution.",type:"warning",showCancelButton:!0,confirmButtonText:"Cancel Change",cancelButtonText:"Proceed"},function(isConfirm){isConfirm&&this.props.toggleEdit()}.bind(this)),formData.data={},this.setState({currentSpecimenType:value})),"containerType"===formElement&&""!==value&&this.setState({currentContainerType:value}),this.setState({formData:formData},this.setParentFormData)}},{key:"setSpecimenTypeFieldFormData",value:function(formElement,value){var formData=this.state.formData;formData.data[formElement]=value,this.setState({formData:formData},this.setParentFormData)}},{key:"setParentFormData",value:function(){if(!this.props.edit){var formData=this.state.formData;this.props.setParentFormData(formData)}}},{key:"getSpecimenTypeFields",value:function(fieldsObject){var _this3=this,specimenTypeFields=Object.keys(fieldsObject).map(function(attribute){var datatype=_this3.props.attributeDatatypes[fieldsObject[attribute].datatypeId].datatype;if("text"===datatype||"number"===datatype){if(null==fieldsObject[attribute].refTableId)return React.createElement(TextboxElement,{name:attribute,label:fieldsObject[attribute].name,onUserInput:_this3.setSpecimenTypeFieldFormData,ref:attribute,required:fieldsObject[attribute].required,value:_this3.state.formData.data[attribute],hasError:_this3.state.formErrors[attribute],errorMessage:"This is a "+datatype+" field."});if(null!==fieldsObject[attribute].refTableId)return React.createElement(SelectElement,{name:attribute,label:fieldsObject[attribute].name,options:"",onUserInput:_this3.setSpecimenTypeFieldFormData,ref:attribute,required:fieldsObject[attribte].required,value:_this3.state.formData.data[attribute]})}if("datetime"===datatype)return React.createElement(DateElement,{name:attribute,label:fieldsObject[attribute].name,onUserInput:_this3.setSpecimenTypeFieldFormData,ref:attribute,required:fieldsObject[attribute].required,value:_this3.state.formData.data[attribute]})});return specimenTypeFields}},{key:"handleUpdate",value:function(e){this.updateSpecimen()}},{key:"updateSpecimen",value:function(){var _$$ajax,formData=this.state.formData;formData.data=JSON.stringify(formData.data);var formObj=new FormData;for(var key in formData)""!==formData[key]&&formObj.append(key,formData[key]);$.ajax((_$$ajax={type:"POST",url:this.props.action,data:formObj,cache:!1,contentType:!1,processData:!1},_defineProperty(_$$ajax,"processData",!1),_defineProperty(_$$ajax,"xhr",function(){var xhr=new window.XMLHttpRequest;return xhr}.bind(this)),_defineProperty(_$$ajax,"success",function(){formData.data=JSON.parse(formData.data),this.props.updateCollection(formData)}.bind(this)),_defineProperty(_$$ajax,"error",function(err){console.error(err);var msg=err.responseJSON?err.responseJSON.message:"Specimen error!";this.setState({errorMessage:msg}),swal(msg,"","error")}.bind(this)),_$$ajax))}}]),SpecimenCollectionForm}(React.Component);SpecimenCollectionForm.propTypes={setParentFormData:React.PropTypes.func,specimenTypes:React.PropTypes.object.isRequired,containerTypesPrimary:React.PropTypes.object.isRequired,specimenTypeAttributes:React.PropTypes.object.isRequired,attributeDatatypes:React.PropTypes.object.isRequired,capacities:React.PropTypes.object.isRequired},exports.default=SpecimenCollectionForm},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_containerBarcodeForm=__webpack_require__(7),_containerBarcodeForm2=_interopRequireDefault(_containerBarcodeForm),BiobankContainerForm=function(_React$Component){function BiobankContainerForm(props){_classCallCheck(this,BiobankContainerForm);var _this=_possibleConstructorReturn(this,(BiobankContainerForm.__proto__||Object.getPrototypeOf(BiobankContainerForm)).call(this,props));return _this.state={formData:{},barcodeFormList:{},formErrors:{},countBarcodeForms:[1],errorMessage:null},_this.handleSubmit=_this.handleSubmit.bind(_this),_this.validateForm=_this.validateForm.bind(_this),_this.setFormData=_this.setFormData.bind(_this),_this.containerSubmit=_this.containerSubmit.bind(_this),_this.addBarcodeForm=_this.addBarcodeForm.bind(_this),_this.setBarcodeFormData=_this.setBarcodeFormData.bind(_this),_this}return _inherits(BiobankContainerForm,_React$Component),_createClass(BiobankContainerForm,[{key:"componentDidMount",value:function(){if(this.props.child){var formData=this.state.formData;formData.parentSpecimen=this.props.specimenId,formData.visitLabel=this.props.sessionId,this.setState({formData:formData})}}},{key:"render",value:function(){for(var _this2=this,glyphStyle={color:"#D3D3D3",margin:"auto"},buttonStyle={appearance:"none",outline:"none",boxShadow:"none",borderColor:"transparent",backgroundColor:"transparent"},barcodeForms=[],_loop=function(i){barcodeForms.push(React.createElement(_containerBarcodeForm2.default,{setParentFormData:_this2.setBarcodeFormData,id:_this2.state.countBarcodeForms[i],containerTypesNonPrimary:_this2.props.containerTypesNonPrimary,containerBarcodesNonPrimary:_this2.props.containerBarcodesNonPrimary,button:i+1===_this2.state.countBarcodeForms.length?React.createElement("button",{type:"button",className:"btn btn-success btn-sm",onClick:_this2.addBarcodeForm},React.createElement("span",{className:"glyphicon glyphicon-plus"})):React.createElement("button",{type:"button",className:"btn btn-primary-outline btn-sm",style:buttonStyle,onClick:function(){return _this2.removeBarcodeForm(i)}},React.createElement("span",{className:"glyphicon glyphicon-remove",style:glyphStyle}))}))},i=0;i<this.state.countBarcodeForms.length;i++)_loop(i);return React.createElement(FormElement,{name:"specimenForm",onSubmit:this.handleSubmit,ref:"form"},React.createElement("h3",null,React.createElement("b",null,"Add New Container",this.state.countBarcodeForms>1?"s":"")),React.createElement("br",null),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-11"},React.createElement(SelectElement,{name:"site",label:"Site",options:this.props.sites,onUserInput:this.setFormData,ref:"site",required:!0,value:this.state.formData.site}))),barcodeForms,React.createElement("div",{className:"col-xs-3 col-xs-offset-9"},React.createElement(ButtonElement,{label:"Submit"})),React.createElement("a",{onClick:this.toggleModal},"Cancel"))}},{key:"validateForm",value:function(formElement,value){var _this3=this,formErrors=this.state.formErrors;"barcode"===formElement&&""!==value&&(/^hello/.test(this.state.formData.barcode)?formErrors.barcode=!1:formErrors.barcode=!0),"quantity"===formElement&&""!==value&&(isNaN(value)||value>this.props.capacities[this.state.currentContainerType]?formErrors.quantity=!0:formErrors.quantity=!1);var specimenTypeFieldsObject=this.props.specimenTypeAttributes[this.state.currentSpecimenType];Object.keys(specimenTypeFieldsObject).map(function(attribute){var datatype=_this3.props.attributeDatatypes[specimenTypeFieldsObject[attribute].datatypeId].datatype;"number"===datatype&&formElement===attribute&&(isNaN(value)&&""!==value?formErrors[attribute]=!0:formErrors[attribute]=!1)});this.setState({formErrors:formErrors})}},{key:"handleSubmit",value:function(e){e.preventDefault();var formData=this.state.formData,formRefs=(this.state.barcodeFormList,this.refs);this.isValidForm(formRefs,formData)&&this.containerSubmit()}},{key:"containerSubmit",value:function(){var formData=this.state.formData,barcodeFormList=this.state.barcodeFormList;formData.barcodeFormList=JSON.stringify(barcodeFormList);var formObj=new FormData;for(var key in formData)""!==formData[key]&&formObj.append(key,formData[key]);$.ajax({type:"POST",url:this.props.action,data:formObj,cache:!1,contentType:!1,processData:!1,xhr:function(){var xhr=new window.XMLHttpRequest;return xhr}.bind(this),success:function(){var event=new CustomEvent("update-datatable");window.dispatchEvent(event),this.props.closeModal(),this.props.refreshTable(),swal("Container Submission Successful!","","success")}.bind(this),error:function(err){console.error(err);var msg=err.responseJSON?err.responseJSON.message:"Specimen error!";this.setState({errorMessage:msg}),swal(msg,"","error")}.bind(this)})}},{key:"isValidForm",value:function isValidForm(formRefs,formData){var isValidForm=!0,requiredFields={visitLabel:null};return Object.keys(requiredFields).map(function(field){formData[field]?requiredFields[field]=formData[field]:formRefs[field]&&(formRefs[field].props.hasError=!0,isValidForm=!1)}),this.forceUpdate(),isValidForm}},{key:"setFormData",value:function(formElement,value){var formData=this.state.formData;formData[formElement]=value,this.setState({formData:formData})}},{key:"setBarcodeFormData",value:function(barcodeFormData,barcodeId){var formData=this.state.formData,barcodeFormList=this.state.barcodeFormList;barcodeFormList[barcodeId]=barcodeFormData,formData.barcodeFormList=barcodeFormList,this.setState({formData:formData})}},{key:"addBarcodeForm",value:function(){var countBarcodeForms=this.state.countBarcodeForms;countBarcodeForms.push(countBarcodeForms[countBarcodeForms.length-1]+1),this.setState({countBarcodeForms:countBarcodeForms})}},{key:"removeBarcodeForm",value:function(index){var countBarcodeForms=this.state.countBarcodeForms;countBarcodeForms.splice(index,1),this.setState({countBarcodeForms:countBarcodeForms})}}]),BiobankContainerForm}(React.Component);BiobankContainerForm.propTypes={DataURL:React.PropTypes.string.isRequired,action:React.PropTypes.string.isRequired,barcode:React.PropTypes.string,refreshTable:React.PropTypes.func},exports.default=BiobankContainerForm},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),ContainerBarcodeForm=function(_React$Component){function ContainerBarcodeForm(props){_classCallCheck(this,ContainerBarcodeForm);var _this=_possibleConstructorReturn(this,(ContainerBarcodeForm.__proto__||Object.getPrototypeOf(ContainerBarcodeForm)).call(this,props));return _this.state={formData:{},formErrors:{}},_this.setFormData=_this.setFormData.bind(_this),_this.setSpecimenFormData=_this.setSpecimenFormData.bind(_this),_this.setParentFormData=_this.setParentFormData.bind(_this),_this}return _inherits(ContainerBarcodeForm,_React$Component),_createClass(ContainerBarcodeForm,[{key:"render",value:function(){return React.createElement(FormElement,{name:"biobankBarcode"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-11"},React.createElement("div",{"data-toggle":"collapse","data-target":"#"+this.props.id},React.createElement(TextboxElement,{name:"barcode",label:"Barcode "+this.props.id,onUserInput:this.setFormData,ref:"barcode",required:!0,value:this.state.formData.barcode,hasError:this.state.formErrors.barcode,errorMessage:"Incorrect Barcode format for this Specimen and Container Type"}))),React.createElement("div",{className:"col-xs-1"},this.props.button)),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-2"}),React.createElement("div",{className:"col-xs-9"},React.createElement("div",{id:this.props.id,className:"collapse"},React.createElement(SelectElement,{name:"containerType",label:"Container Type",options:this.props.containerTypesNonPrimary,onUserInput:this.setFormData,required:!0,value:this.state.formData.containerType})))))}},{key:"setFormData",value:function(formElement,value){var formData=this.state.formData;formData[formElement]=value,this.setState({formData:formData},this.setParentFormData)}},{key:"setSpecimenFormData",value:function(specimenFormData){var formData=this.state.formData;for(var attribute in specimenFormData)formData[attribute]=specimenFormData[attribute];this.setState({formData:formData},this.setParentFormData)}},{key:"setParentFormData",value:function(){this.props.setParentFormData(this.state.formData,this.props.id)}}]),ContainerBarcodeForm}(React.Component);ContainerBarcodeForm.propTypes={id:React.PropTypes.string,specimenTypes:React.PropTypes.object.isRequired,containerTypesPrimary:React.PropTypes.object.isRequired,specimenTypeAttributes:React.PropTypes.object.isRequired,attributeDatatypes:React.PropTypes.object.isRequired,capacities:React.PropTypes.object.isRequired},exports.default=ContainerBarcodeForm},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Tabs=function(_React$Component){function Tabs(props){_classCallCheck(this,Tabs);var _this=_possibleConstructorReturn(this,(Tabs.__proto__||Object.getPrototypeOf(Tabs)).call(this,props)),hash=window.location.hash,activeTab="";return _this.props.updateURL&&hash?activeTab=hash.substr(1):_this.props.defaultTab?activeTab=_this.props.defaultTab:_this.props.tabs.length>0&&(activeTab=_this.props.tabs[0].id),_this.state={activeTab:activeTab},_this.handleClick=_this.handleClick.bind(_this),_this.getTabs=_this.getTabs.bind(_this),_this.getTabPanes=_this.getTabPanes.bind(_this),_this}return _inherits(Tabs,_React$Component),_createClass(Tabs,[{key:"handleClick",value:function(tabId,e){if(this.setState({activeTab:tabId}),this.props.onTabChange(tabId),this.props.updateURL){var scrollDistance=$("body").scrollTop()||$("html").scrollTop();window.location.hash=e.target.hash,$("html,body").scrollTop(scrollDistance)}}},{key:"getTabs",value:function(){var tabs=this.props.tabs.map(function(tab){var tabClass=this.state.activeTab===tab.id?"active":null,href="#"+tab.id,tabID="tab-"+tab.id;return React.createElement("li",{role:"presentation",className:tabClass,key:tab.id},React.createElement("a",{id:tabID,href:href,role:"tab","data-toggle":"tab",onClick:this.handleClick.bind(null,tab.id)},tab.label))}.bind(this));return tabs}},{key:"getTabPanes",value:function(){var tabPanes=React.Children.map(this.props.children,function(child,key){if(child)return React.cloneElement(child,{activeTab:this.state.activeTab,key:key})}.bind(this));return tabPanes}},{key:"render",value:function(){var tabs=this.getTabs(),tabPanes=this.getTabPanes(),tabStyle={marginLeft:0,marginBottom:"5px"};return React.createElement("div",null,React.createElement("ul",{className:"nav nav-tabs",role:"tablist",style:tabStyle},tabs),React.createElement("div",{className:"tab-content"},tabPanes))}}]),Tabs}(React.Component);Tabs.propTypes={tabs:React.PropTypes.array.isRequired,defaultTab:React.PropTypes.string,updateURL:React.PropTypes.bool},Tabs.defaultProps={onTabChange:function(){},updateURL:!1};var TabPane=function(_React$Component2){function TabPane(){return _classCallCheck(this,TabPane),_possibleConstructorReturn(this,(TabPane.__proto__||Object.getPrototypeOf(TabPane)).apply(this,arguments))}return _inherits(TabPane,_React$Component2),_createClass(TabPane,[{key:"render",value:function(){var classList="tab-pane",title=void 0;return this.props.TabId===this.props.activeTab&&(classList+=" active"),this.props.Title&&(title=React.createElement("h1",null,this.props.Title)),React.createElement("div",{role:"tabpanel",className:classList,id:this.props.TabId},title,this.props.children)}}]),TabPane}(React.Component);TabPane.propTypes={TabId:React.PropTypes.string.isRequired,Title:React.PropTypes.string,activeTab:React.PropTypes.string};var Modal=function(_React$Component3){function Modal(){return _classCallCheck(this,Modal),_possibleConstructorReturn(this,(Modal.__proto__||Object.getPrototypeOf(Modal)).apply(this,arguments))}return _inherits(Modal,_React$Component3),_createClass(Modal,[{key:"render",value:function(){if(!this.props.show)return null;var modalStyle={position:"relative",maxWidth:1e3,maxHeight:"100%",margin:"0 auto",backgroundColor:"#fff",padding:30,borderRadius:10,overflowY:"auto",zIndex:9999},backdropStyle={position:"fixed",zIndex:9998,top:0,bottom:0,left:0,right:0,backgroundColor:"rgba(0,0,0,0.3)",padding:50};return React.createElement("div",{style:backdropStyle,onClick:this.props.onClose},React.createElement("div",{style:modalStyle,onClick:function(e){e.stopPropagation()}},this.props.children))}}]),Modal}(React.Component);Modal.propTypes={onClose:React.PropTypes.func.isRequired,show:React.PropTypes.bool,children:React.PropTypes.node},exports.Tabs=Tabs,exports.TabPane=TabPane,exports.Modal=Modal},function(module,exports){"use strict";function formatColumn(column,cell,rowData,rowHeaders){var row={};rowHeaders.forEach(function(header,index){row[header]=rowData[index]},this);var classes=[];if("1"===row["Hide File"]&&classes.push("bg-danger"),classes=classes.join(" "),"Barcode"===column){var specimenURL=loris.BaseURL+"/biobank/specimen/?barcode="+row.Barcode;return React.createElement("td",{className:classes},React.createElement("a",{href:specimenURL},cell))}if("Parent Barcode"===column){var specimenURL=loris.BaseURL+"/biobank/specimen/?barcode="+row["Parent Barcode"];return React.createElement("td",{className:classes},React.createElement("a",{href:specimenURL},cell))}if("Container Barcode"===column){var containerURL=loris.BaseURL+"/biobank/container/?barcode="+row["Container Barcode"];return React.createElement("td",{className:classes},React.createElement("a",{href:containerURL},cell))}return React.createElement("td",{className:classes},cell)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=formatColumn},function(module,exports){"use strict";function formatColumn(column,cell,rowData,rowHeaders){var row={};rowHeaders.forEach(function(header,index){row[header]=rowData[index]},this);var classes=[];if("1"===row["Hide File"]&&classes.push("bg-danger"),classes=classes.join(" "),"Barcode"===column){var specimenURL=loris.BaseURL+"/biobank/specimen/?barcode="+row.Barcode;return React.createElement("td",{className:classes},React.createElement("a",{href:specimenURL},cell))}if("Parent Barcode"===column){var specimenURL=loris.BaseURL+"/biobank/specimen/?barcode="+row["Parent Barcode"];return React.createElement("td",{className:classes},React.createElement("a",{href:specimenURL},cell))}if("Container Barcode"===column){var containerURL=loris.BaseURL+"/biobank/container/?barcode="+row["Container Barcode"];return React.createElement("td",{className:classes},React.createElement("a",{href:containerURL},cell))}return React.createElement("td",{className:classes},cell)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=formatColumn}]);
//# sourceMappingURL=biobankIndex.js.map